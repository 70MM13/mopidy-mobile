<ion-view delegate-href view-title="{{ref.name}}">
  <ion-nav-buttons side="secondary">
    <button class="mopidy-mobile-button-icon mopidy-mobile-icon-play"
            ng-click="actions.default(tracks)"
            ng-disabled="!tracks.length"
            >
    </button>
    <button class="mopidy-mobile-button-icon mopidy-mobile-icon-search"
            ui-sref="^.query({name: ref.name, type: ref.type, uri: ref.uri})"
            >
    </button>
    <button class="mopidy-mobile-button-icon mopidy-mobile-icon-menu"
            ng-click="popover.show($event)"
            ng-controller="LibraryMenuCtrl"
            >
    </button>
  </ion-nav-buttons>
  <ion-content>
    <ion-refresher on-refresh="refresh()" pulling-text="{{'Pull to refresh' | translate}}">
    </ion-refresher>
    <form ng-submit="search({any: [q], uris: ref ? [ref.uri] : null})">
      <label class="item item-input">
        <i class="mopidy-mobile-icon-search placeholder-icon"></i>
        <input type="search" placeholder="{{'Search here' | translate}}..." ng-model="q">
      </label>
    </form>
    <div class="list">
      <div class="item item-complex item-icon-left"
           collection-repeat="ref in items"
           ng-class="ref.type == 'track' ? 'item-button-right' : 'item-icon-right'"
           ng-switch="ref.type"
           >
        <div class="item-content item-icon-right"
           ng-click="actions.default(ref)"
           ng-switch-when="track"
           >
          <i class="mopidy-mobile-icon-track"></i>
          {{ref.name}}
          <button class="mopidy-mobile-button-icon mopidy-mobile-icon-menu icon-accessory"
                  ng-click="popover.show($event, ref)">
          </button>
        </div>
        <a class="item-content"
           ui-sref="main.library.browse({type: ref.type, name: ref.name, uri: ref.uri})"
           ng-switch-default
           >
          <i ng-class="'mopidy-mobile-icon-' + ref.type"></i>
          {{ref.name}}
          <i class="mopidy-mobile-icon-link icon-accessory"></i>
        </a>
      </div>
    </div>
  </ion-content>
</ion-view>
